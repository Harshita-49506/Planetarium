<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Weather Center - Planetarium</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" href="Planetarium.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Bangers&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --theme-color: #8e44ad;
            --theme-glow: rgba(142, 68, 173, 0.5);
        }

        body { 
            margin: 0; 
            font-family: 'Roboto', sans-serif; 
            color: white; 
            background-color: #000;
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2071&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 0.5s ease-in-out;
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
            background: rgba(18, 18, 30, 0.7);
            backdrop-filter: blur(10px);
            box-sizing: border-box;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0 20px;
        }

        .header-container { max-width: 1200px; margin: 0 auto; }
        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
        .logo { font-size: 2.2em; font-weight: 700; background: linear-gradient(45deg, var(--theme-color), #ffffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; transition: background 0.5s ease; }
        .login-signup { color: #fff; text-decoration: none; background-color: rgba(83, 83, 83, 0.5); padding: 10px 18px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); }
        nav ul { list-style: none; padding: 0; margin: 10px 0; display: flex; flex-wrap: wrap; justify-content: flex-start; gap: 25px; }
        nav ul li a { color: #e0e0e0; text-decoration: none; font-size: 1.1em; padding-bottom: 5px; position: relative; }
        nav ul li a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--theme-color); transition: width 0.3s ease-out, background-color 0.5s ease; }
        nav ul li a:hover { color: #fff; }
        nav ul li a:hover::after { width: 100%; }

        main { padding-top: 150px; padding-bottom: 40px; }
        .main-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .page-title { font-family: 'Bangers', cursive; font-size: 3.5em; text-align: center; color: var(--theme-color); text-shadow: 2px 2px 0 #000; margin-bottom: 40px; }

        .info-section {
            background-color: rgba(18, 18, 30, 0.85);
            border-radius: 10px;
            border: 1px solid var(--theme-color);
            backdrop-filter: blur(10px);
            padding: 30px;
            margin-bottom: 40px;
        }
        .info-section h2 { margin-top: 0; font-size: 1.8em; font-weight: 700; color: #d8b4fe; border-bottom: 2px solid var(--theme-color); padding-bottom: 10px; }
        .info-section p { color: #ccc; line-height: 1.6; }
        
        .mission-control-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .live-data-panel h3 { font-size: 1.2em; color: var(--theme-color); }
        .live-sun-image { width: 100%; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); }
        
        .forecast-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .forecast-item { background-color: rgba(0,0,0,0.4); padding: 15px; border-radius: 5px; text-align: center; }
        .forecast-label { font-size: 0.9em; color: #ccc; display: block; margin-bottom: 5px;}
        .forecast-value { font-size: 1.8em; font-weight: bold; }
        .forecast-high { color: #E74C3C; }
        .forecast-medium { color: #F39C12; }
        .forecast-low { color: #2ECC71; }

        #sun-earth-connection-svg { font-family: 'Roboto', sans-serif; font-size: 12px; }
        .solar-wind-particle { fill: #ccc; }
        
        .history-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .history-card { background-color: rgba(40, 40, 55, 0.7); border-radius: 8px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); transition: transform 0.3s, box-shadow 0.3s; }
        .history-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .history-header { padding: 20px; display: flex; align-items: center; gap: 15px; }
        .history-card.then .history-header { background-color: #a3937c; color: #3d3d3d; }
        .history-card.now .history-header { background-color: #3498db; color: white; }
        .history-card.modern .history-header { background-color: #e67e22; color: white; }
        .history-header svg { width: 40px; height: 40px; flex-shrink: 0; }
        .history-header h3 { margin: 0; font-size: 1.3em; }
        .history-body { padding: 20px; }
        .history-body ul { padding-left: 20px; color: #ccc; margin: 0; }
        .history-body ul li { margin-bottom: 10px; }
        .full-width-card { grid-column: 1 / -1; }
        
        .chart-container { background-color: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center;}

        #aurora-canvas { background-color: #000; border-radius: 8px; width: 100%; height: 300px; }
        .aurora-controls { display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
        .control-btn { background-color: rgba(0,0,0,0.3); border: 1px solid rgba(255, 255, 255, 0.2); color: white; padding: 10px 20px; border-radius: 50px; cursor: pointer; font-family: 'Roboto', sans-serif; font-weight: 500; font-size: 0.9em; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; }
        .control-btn:hover, .control-btn.active { background-color: var(--theme-color); box-shadow: 0 0 15px var(--theme-glow); transform: translateY(-2px); }
        .control-btn svg { width: 18px; height: 18px; fill: currentColor; }
        #aurora-description { text-align: center; font-style: italic; color: #d8b4fe; min-height: 20px; margin-top: 15px; }
        
        .flare-ladder { display: flex; align-items: flex-end; gap: 10px; padding: 20px; }
        .flare-step { flex: 1; background-color: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; text-align: center; border-bottom: 5px solid; transition: all 0.3s ease; cursor: pointer; }
        .flare-step:hover { transform: translateY(-10px); background-color: rgba(0,0,0,0.5); }
        .flare-step svg { width: 50px; height: 50px; margin-bottom: 10px; }
        .flare-step h3 { margin: 0 0 5px; font-family: 'Bangers', cursive; font-size: 2em; letter-spacing: 1px;}
        .flare-step p { margin: 0; font-size: 0.85em; color: #ccc; }
        .c-step { height: 100px; border-color: #2ECC71; } .c-step h3 { color: #2ECC71; }
        .m-step { height: 150px; border-color: #F39C12; } .m-step h3 { color: #F39C12; }
        .x-step { height: 220px; border-color: #E74C3C; } .x-step h3 { color: #E74C3C; }
        
        .g-scale-grid { display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px; }
        .g-scale-item { border-radius: 8px; padding: 20px; display: flex; gap: 20px; align-items: center; }
        .g-scale-level { font-size: 1.5em; font-weight: bold; flex-shrink: 0; width: 60px; text-align: center; }
        .g-scale-item h3 { margin: 0 0 5px 0; }
        .g-scale-item p { margin: 0; font-size: 0.9em; }
        .g1 { background-color: #F9E79F; color: #333; }
        .g3 { background-color: #E67E22; color: #fff; }
        .g5 { background-color: #922B21; color: #fff; }

        footer { width: 100%; background: rgba(18, 18, 30, 0.7); backdrop-filter: blur(10px); box-sizing: border-box; border-top: 1px solid rgba(255, 255, 255, 0.2); padding: 20px 30px; margin-top: 40px; }
        .footer-container { max-width: 1200px; margin: 0 auto; width: 100%; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 40px; }
        .footer-column { flex: 1; min-width: 250px; display: flex; flex-direction: column; gap: 10px; }
        .footer-column h3 { margin-top: 0; color: #fff; font-weight: 400; }
        .footer-column a { color: #bbb; text-decoration: none; }
        input[type="text"], input[type="email"] { width: 100%; background-color: #2c2c2c; border: 1px solid #444; border-radius: 5px; padding: 10px; color: #e0e0e0; box-sizing: border-box; }
        .subscribe-button { padding: 10px; margin-top: 5px; background-color: var(--theme-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="header-top">
                <img src="Planetarium.png" alt="Planetarium Logo" width=100>
                <h1 class="logo">Planetarium</h1>
                <a href="Login.html" class="login-signup">Login/Sign up</a>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="clarissa-comic.html">Clarissa</a></li>
                    <li><a href="Our Solar System.html" target="_break">Our Solar System</a></li>
                    <li><a href="Space weather.html">Space Weather</a></li>
                    <li><a href="Cosmic Calender.html">Cosmic Calendar</a></li>
                    <li><a href="About.html">About</a></li>
                    <li><a href="settings.html">Settings</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="main-container">
            <h1 class="page-title">Space Weather Center</h1>

            <section class="info-section">
                <h2>Live Mission Control</h2>
                <div class="mission-control-grid">
                    <div class="live-data-panel">
                        <h3>Current Sun Image (NASA SDO)</h3>
                        <img src="https://sdo.gsfc.nasa.gov/assets/img/latest/latest_512_0171.jpg" alt="Live image of the Sun from NASA's Solar Dynamics Observatory" class="live-sun-image">
                    </div>
                    <div class="live-data-panel">
                        <h3>NOAA Space Weather Forecast</h3>
                        <div class="forecast-grid">
                            <div class="forecast-item"><span class="forecast-label">M-Class Flares</span><span class="forecast-value forecast-medium">25%</span></div>
                            <div class="forecast-item"><span class="forecast-label">X-Class Flares</span><span class="forecast-value forecast-high">5%</span></div>
                            <div class="forecast-item"><span class="forecast-label">Geomagnetic Storm</span><span class="forecast-value forecast-low">G1</span></div>
                            <div class="forecast-item"><span class="forecast-label">Radio Blackouts</span><span class="forecast-value forecast-low">R1</span></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="info-section">
                <h2>The Sun-Earth Connection</h2>
                <div class="chart-container">
                    <svg id="sun-earth-connection-svg" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="sunGradient" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="#F9D423" /><stop offset="100%" stop-color="#FF4E50" /></linearGradient>
                            <path id="cme-path" d="M 140 110 C 250 140, 450 150, 650 115" fill="none"/>
                        </defs>
                        <circle cx="100" cy="100" r="40" fill="url(#sunGradient)"/><text x="100" y="155" text-anchor="middle" fill="#fff" font-weight="bold">THE SUN</text>
                        <g transform="translate(700, 100)">
                            <circle cx="0" cy="0" r="25" fill="#3498db" /><ellipse cx="0" cy="0" rx="40" ry="50" stroke="#5DADE2" stroke-width="2" fill="none" opacity="0.5"/><ellipse cx="0" cy="0" rx="50" ry="60" stroke="#5DADE2" stroke-width="1" fill="none" opacity="0.3"/><text x="0" y="45" text-anchor="middle" fill="#fff" font-weight="bold">EARTH</text><text x="0" y="60" text-anchor="middle" fill="#ccc">(Magnetosphere)</text>
                        </g>
                        <path d="M 150 90 C 300 80, 500 85, 650 95" stroke="#ccc" stroke-width="1" fill="none" stroke-dasharray="3,3"/>
                        <circle class="solar-wind-particle" r="1.5"><animateMotion dur="5s" repeatCount="indefinite" path="M 150 90 C 300 80, 500 85, 650 95"/></circle>
                        <text x="400" y="75" text-anchor="middle" fill="#ccc">Solar Wind (400 km/s)</text>
                        <use href="#cme-path" stroke="#FF4E50" stroke-width="3" />
                        <circle r="5" fill="#FF4E50"><animateMotion dur="3s" repeatCount="indefinite" path="M 140 110 C 250 140, 450 150, 650 115"/></circle>
                        <text x="400" y="160" text-anchor="middle" fill="#FF4E50" font-weight="bold">Coronal Mass Ejection (CME)</text>
                         <line x1="100" y1="180" x2="700" y2="180" stroke="white" stroke-width="1" /><text x="400" y="195" text-anchor="middle" fill="white">93 million miles</text>
                    </svg>
                </div>
            </section>

             <section class="info-section">
                <h2>Cosmic Light Show</h2>
                <div class="chart-container">
                    <canvas id="aurora-canvas"></canvas>
                </div>
                <div class="aurora-controls">
                    <button class="control-btn active" data-level="1" data-desc="A gentle green glow, often seen near the poles."><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span>Calm</span></button>
                    <button class="control-btn" data-level="3" data-desc="Brighter, more colorful lights with pinks and greens that move more quickly."><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span>Active</span></button>
                    <button class="control-btn" data-level="5" data-desc="An intense and beautiful cascade of green, pink, and blue light!"><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span>Intense</span></button>
                </div>
                <p id="aurora-description">A gentle green glow, often seen near the poles.</p>
            </section>
            
            <section class="info-section">
                <h2>The 11-Year Solar Cycle</h2>
                <div class="chart-container">
                    <canvas id="solarCycleChart"></canvas>
                </div>
            </section>
            
             <section class="info-section">
                <h2>History's Biggest Storms</h2>
                <div class="history-grid">
                     <div class="history-card then">
                        <div class="history-header"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M20,2H4C2.9,2,2,2.9,2,4v16c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2z M8,18H6v-2h2V18z M8,14H6v-2h2V14z M8,10H6V8h2V10z M14,18h-4v-2h4V18z M18,18h-2v-2h2V18z M18,14h-8v-2h8V14z M18,10h-8V8h8V10z"/></svg><h3>1859 - Carrington Event</h3></div>
                        <div class="history-body"><ul><li>The largest solar storm ever recorded!</li><li>Telegraph systems worldwide went haywire.</li><li>Auroras were seen as far south as the Caribbean.</li></ul></div>
                    </div>
                     <div class="history-card now">
                        <div class="history-header"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2L1 21h22L12 2zm1 16h-2v-2h2v2zm0-4h-2V7h2v7z"/></svg><h3>1989 - Quebec Blackout</h3></div>
                        <div class="history-body"><ul><li>A much smaller storm, but it hit modern tech.</li><li>Caused the power grid of Quebec to collapse.</li><li>6 million people lost power for 9 hours.</li></ul></div>
                    </div>
                     <div class="history-card modern full-width-card">
                        <div class="history-header"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 11.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5S6.83 10 6 10s-1.5.67-1.5 1.5zm11-4c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5zM19 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg><h3>2003 - Halloween Storms</h3></div>
                        <div class="history-body"><ul><li>A series of intense flares hit in the internet age.</li><li>Caused GPS errors for hours.</li><li>Forced airlines to reroute flights away from the poles.</li></ul></div>
                    </div>
                </div>
            </section>
            
            <section class="info-section">
                <h2>Solar Flare Power Ladder</h2>
                <div class="flare-ladder">
                    <div class="flare-step c-step">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15,22H9V20H15V22M12,6C10.34,6 9,7.34 9,9V13.5C9,14.88 10.12,16 11.5,16C12.88,16 14,14.88 14,13.5V9C14,7.34 12.66,6 12,6M18.5,10.5C18.5,11.04 18.29,11.53 17.94,11.85L19.36,13.27C20.37,12.26 21,10.95 21,9.5C21,5.56 17.76,2.23 13.6,2.05V1H10.4V2.05C6.24,2.23 3,5.56 3,9.5C3,10.95 3.63,12.26 4.64,13.27L6.06,11.85C5.71,11.53 5.5,11.04 5.5,10.5C5.5,8.16 7.42,6.25 9.77,6.03L10.5,12H13.5L14.23,6.03C16.58,6.25 18.5,8.16 18.5,10.5Z" /></svg>
                        <h3>C-Class</h3>
                        <p>Like a Sparkler</p>
                    </div>
                     <div class="flare-step m-step">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,4C12,4 12.06,4 12.06,4C14.27,4 16,5.73 16,7.94C16,9.39 15.22,10.66 14.06,11.39C14.06,11.39 14,11.44 14,11.44V12.5C14,13.88 12.88,15 11.5,15H11.44C10.05,15 8.94,13.88 8.94,12.5V11.5C8.94,11.5 8.87,11.47 8.87,11.47C7.72,10.74 7,9.44 7,8C7,5.79 8.79,4 11,4C11,4 11.06,4 11.06,4M12,2C9.24,2 7,4.24 7,7C7,8.25 7.5,9.36 8.35,10.18L6,12.53V15.5C6,16.88 7.12,18 8.5,18H9V21H11V18H13V21H15V18H15.5C16.88,18 18,16.88 18,15.5V12.53L15.65,10.18C16.5,9.36 17,8.25 17,7C17,4.24 14.76,2 12,2Z" /></svg>
                        <h3>M-Class</h3>
                        <p>Like a Firework</p>
                    </div>
                     <div class="flare-step x-step">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,2C12,2 11.94,2 11.94,2C7.79,2 4.14,5.43 4,9.57C3.93,11.83 4.88,13.91 6.4,15.34L12,22L17.6,15.34C19.12,13.91 20.07,11.83 20,9.57C19.86,5.43 16.21,2 12,2Z" /></svg>
                        <h3>X-Class</h3>
                        <p>Like a Volcano!</p>
                    </div>
                </div>
            </section>
            
            <section class="info-section">
                <h2>NOAA Geomagnetic Storm (G-Scale) Impacts</h2>
                <div class="g-scale-grid">
                    <div class="g-scale-item g1"> <div class="g-scale-level">G1</div> <div><h3>Minor</h3><p>Weak power grid fluctuations, auroras visible at high latitudes.</p></div> </div>
                    <div class="g-scale-item g3"> <div class="g-scale-level">G3</div> <div><h3>Strong</h3><p>Voltage corrections required, GPS problems, auroras visible at lower latitudes.</p></div> </div>
                    <div class="g-scale-item g5"> <div class="g-scale-level">G5</div> <div><h3>Extreme</h3><p>Widespread power grid blackouts, satellite failures, auroras visible in Florida/Texas.</p></div> </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Connect with Us</h3>
                <a href="mailto:contact@planetarium.space">contact@planetarium.space</a>
                <a href="#">Address</a>
                <br>
                <a href="#" target="_blank">Starship Twitter</a>
                <a href="#" target="_blank">Cosmos Instagram</a>
            </div>
            <div class="footer-column">
                <h3>Solar Magzines</h3>
                <p style="font-size: 0.9em; color: #ccc; margin: 0 0 10px;">Get the latest cosmic updates delivered to
                    your inbox!</p>
                <input type="text" placeholder="Enter your name">
                <input type="email" placeholder="Enter your e-mail address">
                <button class="subscribe-button">Subscribe</button>
            </div>
        </div>
    </footer>
    
    <script src="theme-loader.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('aurora-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let lines = [];
                let level = 1;
                let time = 0;
                const descriptionEl = document.getElementById('aurora-description');

                function resize() { if (!canvas) return; canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight; }
                
                class Aurora {
                    constructor(level) {
                        this.level = level;
                        this.width = 10 + Math.random() * 20;
                        this.speed = 0.01 + Math.random() * 0.02;
                        this.amplitude = 20 + Math.random() * 30 * level;
                        this.y = Math.random() * canvas.height;
                        this.life = 100 + Math.random() * 100;
                        this.length = 100 + Math.random() * 100;
                        const colors = [ [0, 255, 100], [255, 0, 150], [0, 150, 255] ];
                        const colorSet = level > 3 ? colors : level > 1 ? colors.slice(0, 2) : colors.slice(0, 1);
                        this.color = colorSet[Math.floor(Math.random() * colorSet.length)];
                    }
                    update() { this.life--; }
                    draw(time) {
                        if (this.y - this.length / 2 > canvas.height || this.length <= 0) return;
                        const gradient = ctx.createLinearGradient(0, this.y - this.length / 2, 0, this.y + this.length / 2);
                        gradient.addColorStop(0, `rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, 0)`);
                        gradient.addColorStop(0.5, `rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, ${this.life / 200 * 0.7})`);
                        gradient.addColorStop(1, `rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, 0)`);

                        ctx.beginPath();
                        for (let x = 0; x < canvas.width; x += 5) {
                            const y = this.y + Math.sin(x / 50 + time * this.speed) * this.amplitude * Math.sin(time * 0.01);
                            ctx.lineTo(x, y);
                        }
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = this.width;
                        ctx.stroke();
                    }
                }
                
                function animate() {
                    if (!ctx) return;
                    ctx.fillStyle = 'rgba(0,0,0,0.1)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    if (lines.length < level * 2) {
                        lines.push(new Aurora(level));
                    }
                    lines = lines.filter(l => l.life > 0);
                    lines.forEach(l => { l.update(); l.draw(time); });

                    time += 0.1;
                    requestAnimationFrame(animate);
                }

                document.querySelectorAll('.aurora-controls .control-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.aurora-controls .control-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        level = parseInt(btn.dataset.level);
                        descriptionEl.textContent = btn.dataset.desc;
                        lines = [];
                    });
                });

                resize();
                window.addEventListener('resize', resize);
                animate();
            }

            const solarCycleCtx = document.getElementById('solarCycleChart');
            if(solarCycleCtx) {
                 new Chart(solarCycleCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['2008', '2010', '2012', '2014', '2016', '2018', '2020', '2022', '2024'],
                        datasets: [{
                            label: 'Sunspot Number',
                            data: [5, 20, 80, 110, 40, 10, 5, 70, 115],
                            borderColor: 'rgba(241, 196, 15, 1)',
                            backgroundColor: 'rgba(241, 196, 15, 0.2)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: { responsive: true, scales: { y: { ticks: { color: '#fff' } }, x: { ticks: { color: '#fff' } } }, plugins: { legend: { labels: { color: '#fff' } } } }
                });
            }
            
            const activateShieldBtn = document.getElementById('activate-shield-btn');
            if(activateShieldBtn) {
                activateShieldBtn.addEventListener('click', () => {
                    document.getElementById('magnetosphere-svg').classList.toggle('active');
                });
            }
        });
    </script>
</body>
</html>